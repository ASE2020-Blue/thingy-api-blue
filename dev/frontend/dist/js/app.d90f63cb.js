(function(e){function t(t){for(var n,s,i=t[0],c=t[1],l=t[2],d=0,h=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&h.push(r[s][0]),r[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(h.length)h.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(n=!1)}n&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},r={app:0},o=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=a("dc21"),o=a("688d"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("AppBar"),a("v-main",[a("router-view")],1)],1)},i=[],c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[a("v-toolbar-title",[e._v("Blue thingy")]),a("v-spacer"),e.isConnected?a("v-menu",{attrs:{left:"",bottom:"","open-on-hover":""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-account-circle")])],1)]}}],null,!1,990591291)},[a("v-list",[a("v-list-item",{on:{click:e.logout}},[a("v-list-item-title",[e._v("Logout")])],1)],1)],1):e._e()],1)},l=[],u=a("5530"),d=a("2f62"),h=(a("d3b7"),a("b0c0"),a("bc3a")),p=a.n(h),v=a("8c4f"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",[a("v-row",[a("v-col",{class:{"text-center":!0}},[a("h1",[e._v("Blue thingy, your weather station")])])],1)],1),e.isLoading?a("v-container",[a("v-row",[a("v-col",{class:{"text-center":!0},attrs:{col:"12","align-self":"center","justify-self":"center"}},[a("v-progress-circular",{attrs:{size:100,width:10,color:"primary",indeterminate:""}})],1)],1)],1):a("v-container",[a("v-row",{staticClass:"d-flex  justify-space-between mb-3"},[a("v-col",{staticClass:"pa-2",attrs:{cols:"8",sm:"4"}},[a("v-select",{staticStyle:{"padding-top":"20px"},attrs:{items:e.thingies,"item-text":"uuid","item-value":"uuid",label:"Your thingies",outlined:"","return-object":""},model:{value:e.selectedThingy,callback:function(t){e.selectedThingy=t},expression:"selectedThingy"}})],1),a("div",{staticClass:"pa-2",attrs:{cols:"8",sm:"4"}},[a("v-col",e._l(e.envParams,(function(t,n){return a("v-checkbox",{key:"checkbox-param-"+n,attrs:{label:t.value,value:t.value,"hide-details":""},model:{value:e.selectedEnvParams,callback:function(t){e.selectedEnvParams=t},expression:"selectedEnvParams"}})})),1)],1),a("v-col",{staticClass:"pa-2",attrs:{cols:"8",sm:"4"}},[a("p",{staticClass:"text-body-1",staticStyle:{"padding-top":"20px"}},[e._v(" Show report of the ")]),a("v-radio-group",{attrs:{max:"1"},model:{value:e.selectedPeriod,callback:function(t){e.selectedPeriod=t},expression:"selectedPeriod"}},[e._l(e.reportPeriods,(function(e){return a("v-radio",{key:e,attrs:{label:"last "+e+" days",value:e}})})),e.selectedThingyLastLocalisation?a("v-radio",{key:"entireLastLocation",attrs:{label:"last location : "+e.selectedThingyLastLocalisation.locationName,value:"entireLastLocation"}}):e._e()],2)],1)],1),a("Graphic",{attrs:{envParams:e.envParams,series:e.graphSeries,selectedEnvParams:e.selectedEnvParams}})],1)],1)},m=[];a("4160"),a("3ca3"),a("159b"),a("ddb0"),a("99af"),a("a15b"),a("d81d"),a("b64b");function g(e,t){return"".concat(e,"?").concat(Object.keys(t).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))})).join("&"))}var b="/thingy",y={getAllThingies:function(){return he.get("".concat(b))},getThingyLocations:function(e,t){return he.get("".concat(b,"/").concat(e,"/locationHistories"),t)},getEnvironmentValues:function(e,t){return he.get(g("".concat(b,"/").concat(e,"/environmentParamsValues"),t))}},_=[{value:"TEMPERATURE",key:"temp"},{value:"HUMIDITY",key:"humidity"},{value:"AIR_QUALITY",key:"air"},{value:"AIR_PRESSURE",key:"pres"},{value:"CO2_EQUIV",key:"co2"},{value:"LIGHT",key:"light"}],P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isLoading?a("v-container",[a("v-row",[a("v-col",{class:{"text-center":!0},attrs:{col:"12","align-self":"center","justify-self":"center"}},[a("v-progress-circular",{attrs:{size:100,width:10,color:"primary",indeterminate:""}})],1)],1)],1):a("v-container",[a("v-row",{attrs:{align:"center",justify:"center"}},[e.selectedEnvParams.length>0&&e.seriesChart.length>0?a("div",e._l(e.seriesChart,(function(t,n){return a("div",{key:"env-param-"+n},[e.selectedEnvParams.includes(t[0].name)?a("v-col",{attrs:{cols:"12",sm:"6"}},[a("h3",[e._v("Report for "+e._s(t[0].name))]),t[0].data.length>0?a("chart",{attrs:{width:"800",type:"line",options:e.getChartOptions(t,n),series:t}}):a("p",[e._v("No data.")])],1):e._e()],1)})),0):0===e.selectedEnvParams.length?a("v-col",{attrs:{cols:"12",sm:"6"}},[a("h4",{staticClass:"text-center"},[e._v("No selected environment parameter")])]):a("v-col",{attrs:{cols:"12",sm:"6"}},[a("h3",{staticClass:"text-center"},[e._v("No data.")])])],1)],1)],1)},w=[],E=a("2909");a("ac1f"),a("1276");function x(e){return T(e)+" "+k(e)}function T(e){var t=new Date(e).toLocaleDateString().split(" ");return t[0]}function k(e){var t=new Date(e).toTimeString().split(" ");return t[0]}var L={name:"Graphic",props:["series","envParams","selectedEnvParams"],data:function(){return{isLoading:!0,seriesChart:[],xaxis:[],dateFrom:new Date,dateTo:new Date,min:[],max:[]}},watch:{series:function(){this.loadData()}},methods:{loadData:function(){var e=this;this.isLoading=!0,this.seriesChart=[],this.series.forEach((function(t,a){var n=[],r={name:e.envParams[a].value,data:[]},o=[];t.data.forEach((function(e){r.data.push(e.value),o.push(x(e.createdAt))})),e.xaxis.push(o),e.min.push(r.data.length>0?Math.min.apply(Math,Object(E["a"])(r.data)):0),e.max.push(r.data.length>0?Math.max.apply(Math,Object(E["a"])(r.data)):0),n.push(r),e.seriesChart.push(n)})),this.isLoading=!1},getChartOptions:function(e,t){return{chart:{height:350,type:"line",dropShadow:{enabled:!0,color:"#000",top:18,left:7,blur:10,opacity:.2},toolbar:{show:!1}},colors:["#77B6EA","#545454"],stroke:{curve:"smooth"},grid:{borderColor:"#e7e7e7",row:{colors:["#f3f3f3","transparent"],opacity:.5}},xaxis:{labels:{show:!1},categories:this.xaxis[t]},yaxis:{title:{text:e[0].name},min:this.min[t]-5,max:this.max[t]+5},legend:{position:"top",horizontalAlign:"right",floating:!0,offsetY:-25,offsetX:-5}}}},created:function(){this.loadData()}},V=L,j=a("2877"),O=a("6544"),S=a.n(O),C=a("62ad"),A=a("a523"),R=a("490a"),U=a("0fd9"),D=Object(j["a"])(V,P,w,!1,null,"1f6b5752",null),N=D.exports;S()(D,{VCol:C["a"],VContainer:A["a"],VProgressCircular:R["a"],VRow:U["a"]});var $=new Date,B={name:"Thingies",components:{Graphic:N},data:function(){return{thingies:void 0,selectedThingy:void 0,selectedThingyLastLocalisation:void 0,reportPeriods:[7,30],selectedPeriod:void 0,envValues:[],envParams:[],selectedEnvParam:void 0,graphSeries:[],isLoading:!0,selectedEnvParams:[],dateFrom:void 0,dateTo:$}},watch:{selectedThingy:function(e){this.selectedThingy=e,this.selectedThingyLastLocalisation=this.selectedThingy.locationHistories[0],!this.selectedThingyLastLocalisation&&this.isLastLocation()?this.selectedPeriod=this.reportPeriods[0]:this.loadEnvParamValues()},selectedPeriod:function(e){this.selectedPeriod=e,this.isLastLocation()?this.dateFrom=new Date(this.selectedThingyLastLocalisation.createdAt):this.dateFrom=new Date($.getTime()-24*e*60*60*1e3),this.loadEnvParamValues()},selectedEnvParam:function(){this.loadEnvParamValues()}},created:function(){var e=this;this.selectedPeriod=this.reportPeriods[0],this.envParams=_,this.selectedEnvParam=this.envParams[0],y.getAllThingies().then((function(t){e.thingies=t.data,e.thingies.sort((function(e,t){return e.uuid>t.uuid?1:-1})),e.thingies.length>0&&(e.selectedThingy=e.thingies[0],e.selectedThingy.locationHistories.length>0&&(e.selectedThingyLastLocalisation=e.selectedThingy.locationHistories[0]))})).catch((function(e){return console.error(e)})).finally(this.isLoading=!1)},methods:{clearData:function(){this.envValues=[],this.graphSeries=[]},isLastLocation:function(){return"entireLastLocation"===this.selectedPeriod},loadEnvParamValues:function(){var e=this;if(this.selectedThingy){var t=[];this.envParams.forEach((function(a){var n={dateFrom:e.dateFrom,dateTo:e.dateTo,envParam:a.value};t.push(y.getEnvironmentValues(e.selectedThingy.uuid,n))})),Promise.all(t).then((function(t){e.graphSeries=t})).catch((function(e){return console.error(e)}))}}}},I=B,M=(a("8087"),a("ac7c")),Y=a("67b6"),F=a("43a6"),z=a("b974"),G=Object(j["a"])(I,f,m,!1,null,"4d782021",null),H=G.exports;S()(G,{VCheckbox:M["a"],VCol:C["a"],VContainer:A["a"],VProgressCircular:R["a"],VRadio:Y["a"],VRadioGroup:F["a"],VRow:U["a"],VSelect:z["a"]});var q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"6"}},[a("v-card",[a("v-card-title",[e._v("Login")]),a("v-container",[a("validation-observer",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.invalid;return[a("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[a("validation-provider",{attrs:{name:"email",rules:"required|email"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("v-text-field",{attrs:{"error-messages":n,label:"email",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})]}}],null,!0)}),a("validation-provider",{attrs:{rules:"required|min:8|password",name:"password"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("v-text-field",{attrs:{"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password","error-messages":n,label:"password",required:""},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})]}}],null,!0)}),a("v-snackbar",{attrs:{top:"",value:!!e.failed,timeout:3e3,color:"warning"}},[e._v(" Login failed. Try again ! ")]),a("v-btn",{staticClass:"mr-4",attrs:{type:"submit",disabled:n,color:"success"}},[e._v(" submit ")]),a("v-btn",{on:{click:e.clear}},[e._v(" clear ")])],1)]}}])})],1)],1)],1)],1)],1)},Z=[],J=(a("4d63"),a("25f0"),a("96cf"),a("1da1")),Q=a("4c93"),X=a("7bb1");Object(X["d"])("eager"),Object(X["c"])("required",Object(u["a"])(Object(u["a"])({},Q["d"]),{},{message:"{_field_} can not be empty"})),Object(X["c"])("alpha_dash",Object(u["a"])(Object(u["a"])({},Q["a"]),{},{message:"{_field_} may contain alphabetic characters, numbers, dashes or underscores."})),Object(X["c"])("email",{validate:function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)},message:"{_field_} must be a valid email. Like robert@example.com"}),Object(X["c"])("password",{validate:function(e){var t=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})");return t.test(e)},message:"{_field_} must contain: uppercase and lowercase letter, number, special character"}),Object(X["c"])("min",Object(u["a"])(Object(u["a"])({},Q["c"]),{},{message:"{_field_} has to be at least {length} characters long"})),Object(X["c"])("max",Object(u["a"])(Object(u["a"])({},Q["b"]),{},{message:"{_field_} may not be longer than {length} characters"}));var K={name:"Login",components:{ValidationProvider:X["b"],ValidationObserver:X["a"]},data:function(){return{email:"demo@unifr.ch",password:"mC0mpl*xPass",showPassword:!1,failed:!1}},methods:{submit:function(){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.failed=!1,!e.$refs.observer.validate()){t.next=14;break}return t.prev=2,t.next=5,pe.login(e.email,e.password);case 5:a=t.sent,e.$store.commit("loginUser",a.data),e.$cookies.set("token",a.data),le.push("thingies"),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),e.failed=!0;case 14:case"end":return t.stop()}}),t,null,[[2,11]])})))()},clear:function(){this.email="",this.password="",this.$refs.observer.reset()}}},W=K,ee=a("8336"),te=a("b0af"),ae=a("99d9"),ne=a("2db4"),re=a("8654"),oe=Object(j["a"])(W,q,Z,!1,null,"364d3f4a",null),se=oe.exports;S()(oe,{VBtn:ee["a"],VCard:te["a"],VCardTitle:ae["a"],VCol:C["a"],VContainer:A["a"],VRow:U["a"],VSnackbar:ne["a"],VTextField:re["a"]}),n["a"].use(v["a"]);var ie=[{path:"/thingies",name:"Thingies",component:H},{path:"/login",name:"Login",component:se},{path:"*",redirect:"/thingies"}],ce=new v["a"]({mode:"history",base:"/",routes:ie}),le=ce,ue="https://thingy-blue.xyz/api";p.a.defaults.withCredentials=!0;var de=p.a.create({baseURL:ue,headers:{"Content-Type":"application/json"}});de.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status&&"Login"!==le.currentRoute.name&&le.push("login"),Promise.reject(e)}));var he=de,pe={login:function(e,t){return new Promise((function(a,n){he.post("/auth/login",{email:e,password:t}).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))},logout:function(){return new Promise((function(e){he.get("/auth/logout").then((function(t){return e(t)})).catch((function(t){try{e(t)}catch(a){}}))}))}},ve={name:"AppBar",computed:Object(u["a"])({},Object(d["b"])(["isConnected"])),methods:{logout:function(){var e=this;pe.logout().then((function(){e.$store.commit("logoutUser"),e.$cookies.remove("token"),le.push("login")})).catch((function(e){return console.error(e)}))}}},fe=ve,me=a("40dc"),ge=a("132d"),be=a("8860"),ye=a("da13"),_e=a("5d23"),Pe=a("e449"),we=a("2fa4"),Ee=a("2a7f"),xe=Object(j["a"])(fe,c,l,!1,null,"3f8ea22e",null),Te=xe.exports;S()(xe,{VAppBar:me["a"],VBtn:ee["a"],VIcon:ge["a"],VList:be["a"],VListItem:ye["a"],VListItemTitle:_e["b"],VMenu:Pe["a"],VSpacer:we["a"],VToolbarTitle:Ee["a"]});var ke={name:"App",components:{AppBar:Te},created:function(){this.$cookies.get("token")&&(this.$store.commit("initToken",this.$cookies.get("token")),le.push("thingies"))}},Le=ke,Ve=a("7496"),je=a("f6c4"),Oe=Object(j["a"])(Le,s,i,!1,null,null,null),Se=Oe.exports;S()(Oe,{VApp:Ve["a"],VMain:je["a"]}),n["a"].use(d["a"]);var Ce=new d["a"].Store({state:{token:""},mutations:{initToken:function(e,t){e.token=t},loginUser:function(e,t){e.token=t},logoutUser:function(e){e.token=""}},getters:{isConnected:function(e){return""!==e.token}},actions:{},modules:{}}),Ae=a("f309");n["a"].use(Ae["a"]);var Re=new Ae["a"]({icons:{iconfont:"mdi"}}),Ue=a("1321"),De=a.n(Ue),Ne=a("2b27"),$e=a.n(Ne);n["a"].use($e.a);var Be=Object({VUE_APP_API_BASE_URL:"https://thingy-blue.xyz/api",VUE_APP_DEBUG_SENTRY:"true",VUE_APP_ENABLE_SENTRY:"true",VUE_APP_FRONTEND_SENTRY_DSN:"https://8c8bbacb9c414a18b6bda09762d11f8a@o490864.ingest.sentry.io/5557099",NODE_ENV:"production",BASE_URL:"/"}),Ie=Be.VUE_APP_FRONTEND_SENTRY_DSN,Me=Be.VUE_APP_ENABLE_SENTRY,Ye=Be.VUE_APP_DEBUG_SENTRY;r["a"]({Vue:n["a"],dsn:Ie,enabled:"true"===Me||"1"===Me,debug:"true"===Ye||"1"===Ye,autoSessionTracking:!0,integrations:[new o["a"].BrowserTracing],tracesSampleRate:1}),n["a"].config.productionTip=!1,n["a"].use(De.a),n["a"].use(X["e"]),n["a"].component("chart",De.a),new n["a"]({router:le,store:Ce,vuetify:Re,render:function(e){return e(Se)}}).$mount("#app")},8087:function(e,t,a){"use strict";a("beb2")},beb2:function(e,t,a){}});
//# sourceMappingURL=app.d90f63cb.js.map