(function(e){function t(t){for(var n,i,o=t[0],c=t[1],l=t[2],d=0,h=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&h.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(h.length)h.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={app:0},s=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"418a":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=a("dc21"),s=a("688d"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[e._v("Blue thingy")]),a("v-main",[a("router-view")],1)],1)},o=[],c={name:"App",components:{},data:function(){return{}}},l=c,u=a("2877"),d=a("6544"),h=a.n(d),p=a("7496"),v=a("40dc"),m=a("f6c4"),f=Object(u["a"])(l,i,o,!1,null,null,null),g=f.exports;h()(f,{VApp:p["a"],VAppBar:v["a"],VMain:m["a"]});var b=a("8c4f"),y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",[a("v-row",[a("v-col",{class:{"text-center":!0}},[a("h1",[e._v("Blue thingy, your weather station")])])],1)],1),e.isLoading?a("v-container",[a("v-row",[a("v-col",{class:{"text-center":!0},attrs:{col:"12","align-self":"center","justify-self":"center"}},[a("v-progress-circular",{attrs:{size:100,width:10,color:"primary",indeterminate:""}})],1)],1)],1):a("v-container",[a("v-row",{staticClass:"d-flex  justify-space-between mb-3"},[a("v-col",{staticClass:"pa-2",attrs:{cols:"8",sm:"4"}},[a("v-select",{staticStyle:{"padding-top":"20px"},attrs:{items:e.thingies,"item-text":"uuid","item-value":"uuid",label:"Your thingies",outlined:"","return-object":""},model:{value:e.selectedThingy,callback:function(t){e.selectedThingy=t},expression:"selectedThingy"}})],1),a("div",{staticClass:"pa-2",attrs:{cols:"8",sm:"4"}},[a("v-col",e._l(e.envParams,(function(t,n){return a("v-checkbox",{key:"checkbox-param-"+n,attrs:{label:t.value,value:t.value,"hide-details":""},model:{value:e.selectedEnvParams,callback:function(t){e.selectedEnvParams=t},expression:"selectedEnvParams"}})})),1)],1),a("v-col",{staticClass:"pa-2",attrs:{cols:"8",sm:"4"}},[a("p",{staticClass:"text-body-1",staticStyle:{"padding-top":"20px"}},[e._v(" Show report of the ")]),a("v-radio-group",{attrs:{max:"1"},model:{value:e.selectedPeriod,callback:function(t){e.selectedPeriod=t},expression:"selectedPeriod"}},[e._l(e.reportPeriods,(function(e){return a("v-radio",{key:e,attrs:{label:"last "+e+" days",value:e}})})),e.selectedThingyLastLocalisation?a("v-radio",{key:"entireLastLocation",attrs:{label:"last location : "+e.selectedThingyLastLocalisation.locationName,value:"entireLastLocation"}}):e._e()],2)],1)],1),a("Graphic",{attrs:{envParams:e.envParams,series:e.graphSeries,selectedEnvParams:e.selectedEnvParams}})],1)],1)},P=[],_=(a("4160"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("b0c0"),a("bc3a")),w=a.n(_),E="https://thingy-blue.xyz/api";w.a.defaults.withCredentials=!0;var x=w.a.create({baseURL:E,headers:{"Content-Type":"application/json"}});x.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status&&"Login"!==fe.currentRoute.name&&fe.push("login"),Promise.reject(e)}));var T=x;a("99af"),a("a15b"),a("d81d"),a("b64b");function L(e,t){return"".concat(e,"?").concat(Object.keys(t).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))})).join("&"))}var V="/thingy",j={getAllThingies:function(){return T.get("".concat(V))},getThingyLocations:function(e,t){return T.get("".concat(V,"/").concat(e,"/locationHistories"),t)},getEnvironmentValues:function(e,t){return T.get(L("".concat(V,"/").concat(e,"/environmentParamsValues"),t))}},O=[{value:"TEMPERATURE",key:"temp"},{value:"HUMIDITY",key:"humidity"},{value:"AIR_QUALITY",key:"air"},{value:"AIR_PRESSURE",key:"pres"},{value:"CO2_EQUIV",key:"co2"},{value:"LIGHT",key:"light"}],k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isLoading?a("v-container",[a("v-row",[a("v-col",{class:{"text-center":!0},attrs:{col:"12","align-self":"center","justify-self":"center"}},[a("v-progress-circular",{attrs:{size:100,width:10,color:"primary",indeterminate:""}})],1)],1)],1):a("v-container",[a("v-row",{attrs:{align:"center",justify:"center"}},[e.selectedEnvParams.length>0&&e.seriesChart.length>0?a("div",e._l(e.seriesChart,(function(t,n){return a("div",{key:"env-param-"+n},[e.selectedEnvParams.includes(t[0].name)?a("v-col",{attrs:{cols:"12",sm:"6"}},[a("h3",[e._v("Report for "+e._s(t[0].name))]),t[0].data.length>0?a("chart",{attrs:{width:"800",type:"line",options:e.getChartOptions(t,n),series:t}}):a("p",[e._v("No data.")])],1):e._e()],1)})),0):0===e.selectedEnvParams.length?a("v-col",{attrs:{cols:"12",sm:"6"}},[a("h4",{staticClass:"text-center"},[e._v("No selected environment parameter")])]):a("v-col",{attrs:{cols:"12",sm:"6"}},[a("h3",{staticClass:"text-center"},[e._v("No data.")])])],1)],1)],1)},S=[],C=a("2909");a("ac1f"),a("1276");function R(e){return A(e)+" "+D(e)}function A(e){var t=new Date(e).toLocaleDateString().split(" ");return t[0]}function D(e){var t=new Date(e).toTimeString().split(" ");return t[0]}var N={name:"Graphic",props:["series","envParams","selectedEnvParams"],data:function(){return{isLoading:!0,seriesChart:[],xaxis:[],dateFrom:new Date,dateTo:new Date,min:[],max:[]}},watch:{series:function(){this.loadData()}},methods:{loadData:function(){var e=this;this.isLoading=!0,this.seriesChart=[],this.series.forEach((function(t,a){var n=[],r={name:e.envParams[a].value,data:[]},s=[];t.data.forEach((function(e){r.data.push(e.value),s.push(R(e.createdAt))})),e.xaxis.push(s),e.min.push(r.data.length>0?Math.min.apply(Math,Object(C["a"])(r.data)):0),e.max.push(r.data.length>0?Math.max.apply(Math,Object(C["a"])(r.data)):0),n.push(r),e.seriesChart.push(n)})),this.isLoading=!1},getChartOptions:function(e,t){return{chart:{height:350,type:"line",dropShadow:{enabled:!0,color:"#000",top:18,left:7,blur:10,opacity:.2},toolbar:{show:!1}},colors:["#77B6EA","#545454"],stroke:{curve:"smooth"},grid:{borderColor:"#e7e7e7",row:{colors:["#f3f3f3","transparent"],opacity:.5}},xaxis:{labels:{show:!1},categories:this.xaxis[t]},yaxis:{title:{text:e[0].name},min:this.min[t]-5,max:this.max[t]+5},legend:{position:"top",horizontalAlign:"right",floating:!0,offsetY:-25,offsetX:-5}}}},created:function(){this.loadData()}},U=N,B=a("62ad"),M=a("a523"),I=a("490a"),Y=a("0fd9"),F=Object(u["a"])(U,k,S,!1,null,"41bf26af",null),$=F.exports;h()(F,{VCol:B["a"],VContainer:M["a"],VProgressCircular:I["a"],VRow:Y["a"]});var z=new Date,G={name:"Thingies",components:{Graphic:$},data:function(){return{thingies:void 0,selectedThingy:void 0,selectedThingyLastLocalisation:void 0,reportPeriods:[7,30],selectedPeriod:void 0,envValues:[],envParams:[],selectedEnvParam:void 0,graphSeries:[],isLoading:!0,selectedEnvParams:[],dateFrom:void 0,dateTo:z}},watch:{selectedThingy:function(e){this.selectedThingy=e,this.selectedThingyLastLocalisation=this.selectedThingy.locationHistories[0],!this.selectedThingyLastLocalisation&&this.isLastLocation()?this.selectedPeriod=this.reportPeriods[0]:this.loadEnvParamValues()},selectedPeriod:function(e){this.selectedPeriod=e,this.isLastLocation()?this.dateFrom=new Date(this.selectedThingyLastLocalisation.createdAt):this.dateFrom=new Date(z.getTime()-24*e*60*60*1e3),this.loadEnvParamValues()},selectedEnvParam:function(){this.loadEnvParamValues()}},created:function(){var e=this;this.selectedPeriod=this.reportPeriods[0],this.envParams=O,this.selectedEnvParam=this.envParams[0],j.getAllThingies().then((function(t){e.thingies=t.data,e.thingies.sort((function(e,t){return e.uuid>t.uuid?1:-1})),e.thingies.length>0&&(e.selectedThingy=e.thingies[0],e.selectedThingy.locationHistories.length>0&&(e.selectedThingyLastLocalisation=e.selectedThingy.locationHistories[0]))})).catch((function(e){return console.error(e)})).finally(this.isLoading=!1)},methods:{clearData:function(){this.envValues=[],this.graphSeries=[]},isLastLocation:function(){return"entireLastLocation"===this.selectedPeriod},loadEnvParamValues:function(){var e=this;if(this.selectedThingy){var t=[];this.envParams.forEach((function(a){var n={dateFrom:e.dateFrom,dateTo:e.dateTo,envParam:a.value};t.push(j.getEnvironmentValues(e.selectedThingy.uuid,n))})),Promise.all(t).then((function(t){e.graphSeries=t})).catch((function(e){return console.error(e)}))}}}},H=G,q=(a("bf1d"),a("ac7c")),Z=a("67b6"),J=a("43a6"),Q=a("b974"),X=Object(u["a"])(H,y,P,!1,null,"4a314306",null),K=X.exports;h()(X,{VCheckbox:q["a"],VCol:B["a"],VContainer:M["a"],VProgressCircular:I["a"],VRadio:Z["a"],VRadioGroup:J["a"],VRow:Y["a"],VSelect:Q["a"]});var W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"6"}},[a("v-card",[a("v-card-title",[e._v("Login")]),a("v-container",[a("validation-observer",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.invalid;return[a("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[a("validation-provider",{attrs:{name:"email",rules:"required|email"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("v-text-field",{attrs:{"error-messages":n,label:"email",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})]}}],null,!0)}),a("validation-provider",{attrs:{rules:"required|min:8|password",name:"password"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[a("v-text-field",{attrs:{"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password","error-messages":n,label:"password",required:""},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})]}}],null,!0)}),a("v-btn",{staticClass:"mr-4",attrs:{type:"submit",disabled:n,color:"success"}},[e._v(" submit ")]),a("v-btn",{on:{click:e.clear}},[e._v(" clear ")])],1)]}}])})],1)],1)],1)],1)],1)},ee=[],te=(a("4d63"),a("25f0"),a("96cf"),a("1da1")),ae=a("5530"),ne=a("4c93"),re=a("7bb1"),se={login:function(e,t){return new Promise((function(a,n){T.post("/auth/login",{email:e,password:t}).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))}};Object(re["d"])("eager"),Object(re["c"])("required",Object(ae["a"])(Object(ae["a"])({},ne["d"]),{},{message:"{_field_} can not be empty"})),Object(re["c"])("alpha_dash",Object(ae["a"])(Object(ae["a"])({},ne["a"]),{},{message:"{_field_} may contain alphabetic characters, numbers, dashes or underscores."})),Object(re["c"])("email",{validate:function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)},message:"{_field_} must be a valid email. Like robert@example.com"}),Object(re["c"])("password",{validate:function(e){var t=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})");return t.test(e)},message:"{_field_} must contain: uppercase and lowercase letter, number, special character"}),Object(re["c"])("min",Object(ae["a"])(Object(ae["a"])({},ne["c"]),{},{message:"{_field_} has to be at least {length} characters long"})),Object(re["c"])("max",Object(ae["a"])(Object(ae["a"])({},ne["b"]),{},{message:"{_field_} may not be longer than {length} characters"}));var ie={name:"Login",components:{ValidationProvider:re["b"],ValidationObserver:re["a"]},data:function(){return{email:"demo@unifr.ch",password:"mC0mpl*xPass",showPassword:!1}},methods:{submit:function(){var e=this;return Object(te["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$refs.observer.validate()){t.next=9;break}return t.prev=1,t.next=4,se.login(e.email,e.password);case 4:fe.push("thingies"),t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](1);case 9:case"end":return t.stop()}}),t,null,[[1,7]])})))()},clear:function(){this.email="",this.password="",this.$refs.observer.reset()}}},oe=ie,ce=a("8336"),le=a("b0af"),ue=a("99d9"),de=a("8654"),he=Object(u["a"])(oe,W,ee,!1,null,"2d1a8720",null),pe=he.exports;h()(he,{VBtn:ce["a"],VCard:le["a"],VCardTitle:ue["a"],VCol:B["a"],VContainer:M["a"],VRow:Y["a"],VTextField:de["a"]}),n["a"].use(b["a"]);var ve=[{path:"/thingies",name:"Thingies",component:K},{path:"/login",name:"Login",component:pe},{path:"*",redirect:"/thingies"}],me=new b["a"]({mode:"history",base:"/",routes:ve}),fe=me,ge=a("2f62");n["a"].use(ge["a"]);var be=new ge["a"].Store({state:{},mutations:{},actions:{},modules:{}}),ye=a("f309");n["a"].use(ye["a"]);var Pe=new ye["a"]({}),_e=a("1321"),we=a.n(_e),Ee=Object({VUE_APP_API_BASE_URL:"https://thingy-blue.xyz/api",VUE_APP_DEBUG_SENTRY:"true",VUE_APP_ENABLE_SENTRY:"true",VUE_APP_FRONTEND_SENTRY_DSN:"https://8c8bbacb9c414a18b6bda09762d11f8a@o490864.ingest.sentry.io/5557099",NODE_ENV:"production",BASE_URL:"/"}),xe=Ee.VUE_APP_FRONTEND_SENTRY_DSN,Te=Ee.VUE_APP_ENABLE_SENTRY,Le=Ee.VUE_APP_DEBUG_SENTRY;r["a"]({Vue:n["a"],dsn:xe,enabled:"true"===Te||"1"===Te,debug:"true"===Le||"1"===Le,autoSessionTracking:!0,integrations:[new s["a"].BrowserTracing],tracesSampleRate:1}),n["a"].config.productionTip=!1,n["a"].use(we.a),n["a"].use(re["e"]),n["a"].component("chart",we.a),new n["a"]({router:fe,store:be,vuetify:Pe,render:function(e){return e(g)}}).$mount("#app")},bf1d:function(e,t,a){"use strict";a("418a")}});
//# sourceMappingURL=app.75315c3e.js.map